---
subcategory: "Key Manager"
page_title: "Scaleway: scaleway_key_manager_sign"
---

# scaleway_key_manager_sign (Ephemeral Resource)

The [`scaleway_key_manager_sign`](https://registry.terraform.io/providers/scaleway/scaleway/latest/docs/ephemeral-resource/key_manager_sign) ephemeral resource is helpful to sign a message digest with a given key. The key must have its usage set to asymmetric_signing. The digest must be created using the same digest algorithm that is defined in the key's algorithm configuration.

Refer to the Key Manager [documentation](https://www.scaleway.com/en/docs/key-manager/) and [API documentation](https://www.scaleway.com/en/developers/api/key-manager/) for more information.


## Example Usage

```terraform
# Generate a signature for a digest using a key manager key with rsa_pss_2048_sha256 algorithm
resource "scaleway_key_manager_key" "my_key" {
  name        = "my-key"
  region      = "fr-par"
  usage       = "asymmetric_signing"
  algorithm   = "rsa_pss_2048_sha256"
  unprotected = true
}
ephemeral "scaleway_key_manager_sign" "main" {
  key_id = scaleway_key_manager_key.my_key.id
  digest = "my-base64-digest"
  region = "fr-par"
}
# Create a secret, and store the signature in a secret version.
resource "scaleway_secret" "main" {
  name = "my-secret"
}
resource "scaleway_secret_version" "v1" {
  description = "my-secret-version"
  secret_id   = scaleway_secret.main.id
  data_wo     = ephemeral.scaleway_key_manager_sign.main.signature
}
# Retrieve the signature from the secret version datasource
data "scaleway_secret_version" "data_v1" {
  secret_id  = scaleway_secret.main.id
  revision   = "1"
  depends_on = [scaleway_secret_version.v1]
}
```

```terraform
# Generate a signature for a digest using a key manager key with ec_p256_sha256 algorithm
resource "scaleway_key_manager_key" "my_key" {
  name        = "my-key"
  region      = "fr-par"
  usage       = "asymmetric_signing"
  algorithm   = "ec_p256_sha256"
  unprotected = true
}
ephemeral "scaleway_key_manager_sign" "main" {
  key_id = scaleway_key_manager_key.my_key.id
  digest = "my-base64-digest"
  region = "fr-par"
}
```



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `digest` (String, Sensitive) Digest of the message to sign. The digest must be generated using the same algorithm defined in the keyâ€™s algorithm settings, and encoded as a base64 string.
- `key_id` (String) ID of the key to use for signing. Can be a plain UUID or a regional ID.

### Optional

- `region` (String) Region of the key. If not set, the region is derived from the key_id when possible or from the provider configuration.

### Read-Only

- `signature` (String) The message signature, returned as a base64-encoded string.


