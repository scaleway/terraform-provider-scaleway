{{- /*gotype: github.com/hashicorp/terraform-plugin-docs/internal/provider.ResourceTemplateType */ -}}
---
subcategory: "Secrets"
page_title: "Scaleway: scaleway_secret_version"
---

# Resource: scaleway_secret_version

The `scaleway_secret_version` resource allows you to create and manage secret versions in Scaleway Secret Manager.

Refer to the Secret Manager [product documentation](https://www.scaleway.com/en/docs/secret-manager/) and [API documentation](https://www.scaleway.com/en/developers/api/secret-manager/) for more information.

## Example Usage

### Create a secret and a version

The following commands allow you to:

- create a secret named `foo`
- create a version of this secret containing the `my_new_secret` data

```terraform
resource "scaleway_secret" "main" {
  name        = "foo"
  description = "barr"
  tags        = ["foo", "terraform"]
}

resource "scaleway_secret_version" "v1" {
  description = "version1"
  secret_id   = scaleway_secret.main.id
  data        = "my_new_secret"
}
```

## Argument Reference

The following arguments are supported:

- `secret_id` - (Required) The ID of the secret associated with the version.
- `data` - (Optional) The raw data payload of the secret version. Must not exceed 64KiB in size (e.g. `my-secret-version-payload`). Find out more on the [data section](#data).
- `data_wo` - (Optional) The raw data payload of your secret version in [write-only](https://developer.hashicorp.com/terraform/language/manage-sensitive-data/write-only) mode. Must not exceed 64KiB in size (e.g. `my-secret-version-payload`). Find out more on the [data section](#data).
- `data_wo_version` - (Optional) The version of the [write-only](https://developer.hashicorp.com/terraform/language/manage-sensitive-data/write-only) data. To update the `data_wo`, you must also update the `data_wo_version`.
- `description` - (Optional) Description of the secret version (e.g. `my-new-description`).
- `region` - (Defaults to the region specified in the [provider configuration](../index.md#region)). The [region](../guides/regions_and_zones.md#regions) where the resource exists.

### Data

Only one of `data` or `data_wo` should be specified. If both are provided, Terraform will return an error.

Note: The `data` (or `data_wo`) should be a raw string. **The provider handles encoding this string to base64 before sending it to the API so you do not need to encode the data yourself.** The maximum size for either field is 64KiB.

#### `data`
Updating `data` will force the creation of a new secret version.

Keep in mind that this is a sensitive attribute. For more information, see [Sensitive Data in State](https://developer.hashicorp.com/terraform/language/state/sensitive-data).

#### `data_wo`
`data_wo` is a [write-only](https://developer.hashicorp.com/terraform/language/manage-sensitive-data/write-only) attribute, ideal for sensitive secrets that should not be stored in Terraform state. As such, its value is ephemeral and **will not be stored in the state** or displayed in plans.

To update the `data_wo` and trigger a new version creation, you must also update the `data_wo_version` attribute.

~> **Important:**  This property will not be displayed in the Terraform plan, for security reasons.

## Attributes Reference

In addition to all arguments above, the following attributes are exported:

- `revision` - The revision number of the secret version.
- `status` - The status of the secret version.
- `created_at` - The date and time of the secret version's creation (in RFC 3339 format).
- `updated_at` - The date and time of the secret version's last update (in RFC 3339 format).

## Import

This section explains how to import a secret version using the `{region}/{id}/{revision}` format.

~> **Important:** Keep in mind that if you import with the `latest` revision, you will overwrite the previous version you might have been using.

```bash
terraform import scaleway_secret_version.main fr-par/11111111-1111-1111-1111-111111111111/2
```
