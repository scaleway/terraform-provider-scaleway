---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 232
        host: api.scaleway.com
        body: '{"project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-rotation-action","usage":{"symmetric_encryption":"aes_256_gcm"},"description":"Test key","tags":["tf","test"],"unprotected":true,"origin":"unknown_origin"}'
        headers:
            Content-Type:
                - application/json
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 524
        body: '{"id":"72f0adf7-c0a6-4464-a2f7-8d5010e89f90","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-rotation-action","usage":{"symmetric_encryption":"aes_256_gcm"},"state":"enabled","rotation_count":1,"created_at":"2025-12-11T10:04:58.330991Z","updated_at":"2025-12-11T10:04:58.336187Z","protected":false,"locked":false,"description":"Test key","tags":["tf","test"],"rotated_at":"2025-12-11T10:04:58.336187Z","rotation_policy":null,"origin":"scaleway_kms","deletion_requested_at":null,"region":"fr-par"}'
        headers:
            Content-Length:
                - "524"
            Content-Type:
                - application/json
            Date:
                - Thu, 11 Dec 2025 10:04:58 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            X-Request-Id:
                - 068c085b-8f87-4cb4-bb87-f2e094300127
        status: 200 OK
        code: 200
        duration: 395.661879ms
    - id: 1
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/72f0adf7-c0a6-4464-a2f7-8d5010e89f90
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 524
        body: '{"id":"72f0adf7-c0a6-4464-a2f7-8d5010e89f90","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-rotation-action","usage":{"symmetric_encryption":"aes_256_gcm"},"state":"enabled","rotation_count":1,"created_at":"2025-12-11T10:04:58.330991Z","updated_at":"2025-12-11T10:04:58.336187Z","protected":false,"locked":false,"description":"Test key","tags":["tf","test"],"rotated_at":"2025-12-11T10:04:58.336187Z","rotation_policy":null,"origin":"scaleway_kms","deletion_requested_at":null,"region":"fr-par"}'
        headers:
            Content-Length:
                - "524"
            Content-Type:
                - application/json
            Date:
                - Thu, 11 Dec 2025 10:04:58 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            X-Request-Id:
                - 78aff4b4-11c6-494f-99cc-9e65b7ae8820
        status: 200 OK
        code: 200
        duration: 85.988962ms
    - id: 2
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 2
        host: api.scaleway.com
        body: '{}'
        headers:
            Content-Type:
                - application/json
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/72f0adf7-c0a6-4464-a2f7-8d5010e89f90/rotate
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 524
        body: '{"id":"72f0adf7-c0a6-4464-a2f7-8d5010e89f90","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-rotation-action","usage":{"symmetric_encryption":"aes_256_gcm"},"state":"enabled","rotation_count":2,"created_at":"2025-12-11T10:04:58.330991Z","updated_at":"2025-12-11T10:04:58.567736Z","protected":false,"locked":false,"description":"Test key","tags":["tf","test"],"rotated_at":"2025-12-11T10:04:58.567736Z","rotation_policy":null,"origin":"scaleway_kms","deletion_requested_at":null,"region":"fr-par"}'
        headers:
            Content-Length:
                - "524"
            Content-Type:
                - application/json
            Date:
                - Thu, 11 Dec 2025 10:04:58 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            X-Request-Id:
                - ba7e0adf-cd78-47b9-9847-4897de6b8e53
        status: 200 OK
        code: 200
        duration: 139.84669ms
    - id: 3
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/72f0adf7-c0a6-4464-a2f7-8d5010e89f90
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 524
        body: '{"id":"72f0adf7-c0a6-4464-a2f7-8d5010e89f90","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-rotation-action","usage":{"symmetric_encryption":"aes_256_gcm"},"state":"enabled","rotation_count":2,"created_at":"2025-12-11T10:04:58.330991Z","updated_at":"2025-12-11T10:04:58.567736Z","protected":false,"locked":false,"description":"Test key","tags":["tf","test"],"rotated_at":"2025-12-11T10:04:58.567736Z","rotation_policy":null,"origin":"scaleway_kms","deletion_requested_at":null,"region":"fr-par"}'
        headers:
            Content-Length:
                - "524"
            Content-Type:
                - application/json
            Date:
                - Thu, 11 Dec 2025 10:04:58 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            X-Request-Id:
                - 5f0046f5-580c-4675-914a-23ea6e60cc69
        status: 200 OK
        code: 200
        duration: 103.371088ms
    - id: 4
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/72f0adf7-c0a6-4464-a2f7-8d5010e89f90
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 524
        body: '{"id":"72f0adf7-c0a6-4464-a2f7-8d5010e89f90","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-rotation-action","usage":{"symmetric_encryption":"aes_256_gcm"},"state":"enabled","rotation_count":2,"created_at":"2025-12-11T10:04:58.330991Z","updated_at":"2025-12-11T10:04:58.567736Z","protected":false,"locked":false,"description":"Test key","tags":["tf","test"],"rotated_at":"2025-12-11T10:04:58.567736Z","rotation_policy":null,"origin":"scaleway_kms","deletion_requested_at":null,"region":"fr-par"}'
        headers:
            Content-Length:
                - "524"
            Content-Type:
                - application/json
            Date:
                - Thu, 11 Dec 2025 10:04:59 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            X-Request-Id:
                - 70647941-5aa6-4546-b7f8-17f31433f0ba
        status: 200 OK
        code: 200
        duration: 32.739907ms
    - id: 5
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/72f0adf7-c0a6-4464-a2f7-8d5010e89f90
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 524
        body: '{"id":"72f0adf7-c0a6-4464-a2f7-8d5010e89f90","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-rotation-action","usage":{"symmetric_encryption":"aes_256_gcm"},"state":"enabled","rotation_count":2,"created_at":"2025-12-11T10:04:58.330991Z","updated_at":"2025-12-11T10:04:58.567736Z","protected":false,"locked":false,"description":"Test key","tags":["tf","test"],"rotated_at":"2025-12-11T10:04:58.567736Z","rotation_policy":null,"origin":"scaleway_kms","deletion_requested_at":null,"region":"fr-par"}'
        headers:
            Content-Length:
                - "524"
            Content-Type:
                - application/json
            Date:
                - Thu, 11 Dec 2025 10:04:59 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            X-Request-Id:
                - 36953f11-5f31-499c-8524-e5a9034e5d7b
        status: 200 OK
        code: 200
        duration: 67.535118ms
    - id: 6
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/72f0adf7-c0a6-4464-a2f7-8d5010e89f90
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 524
        body: '{"id":"72f0adf7-c0a6-4464-a2f7-8d5010e89f90","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-rotation-action","usage":{"symmetric_encryption":"aes_256_gcm"},"state":"enabled","rotation_count":2,"created_at":"2025-12-11T10:04:58.330991Z","updated_at":"2025-12-11T10:04:58.567736Z","protected":false,"locked":false,"description":"Test key","tags":["tf","test"],"rotated_at":"2025-12-11T10:04:58.567736Z","rotation_policy":null,"origin":"scaleway_kms","deletion_requested_at":null,"region":"fr-par"}'
        headers:
            Content-Length:
                - "524"
            Content-Type:
                - application/json
            Date:
                - Thu, 11 Dec 2025 10:04:59 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            X-Request-Id:
                - f1608784-7ef0-4587-8878-bbb62520da57
        status: 200 OK
        code: 200
        duration: 83.037386ms
    - id: 7
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/72f0adf7-c0a6-4464-a2f7-8d5010e89f90
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 524
        body: '{"id":"72f0adf7-c0a6-4464-a2f7-8d5010e89f90","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-rotation-action","usage":{"symmetric_encryption":"aes_256_gcm"},"state":"enabled","rotation_count":2,"created_at":"2025-12-11T10:04:58.330991Z","updated_at":"2025-12-11T10:04:58.567736Z","protected":false,"locked":false,"description":"Test key","tags":["tf","test"],"rotated_at":"2025-12-11T10:04:58.567736Z","rotation_policy":null,"origin":"scaleway_kms","deletion_requested_at":null,"region":"fr-par"}'
        headers:
            Content-Length:
                - "524"
            Content-Type:
                - application/json
            Date:
                - Thu, 11 Dec 2025 10:04:59 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            X-Request-Id:
                - cc52c48a-fd02-4aa5-b91a-9c5d18482bc6
        status: 200 OK
        code: 200
        duration: 84.34569ms
    - id: 8
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/72f0adf7-c0a6-4464-a2f7-8d5010e89f90
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 524
        body: '{"id":"72f0adf7-c0a6-4464-a2f7-8d5010e89f90","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-rotation-action","usage":{"symmetric_encryption":"aes_256_gcm"},"state":"enabled","rotation_count":2,"created_at":"2025-12-11T10:04:58.330991Z","updated_at":"2025-12-11T10:04:58.567736Z","protected":false,"locked":false,"description":"Test key","tags":["tf","test"],"rotated_at":"2025-12-11T10:04:58.567736Z","rotation_policy":null,"origin":"scaleway_kms","deletion_requested_at":null,"region":"fr-par"}'
        headers:
            Content-Length:
                - "524"
            Content-Type:
                - application/json
            Date:
                - Thu, 11 Dec 2025 10:04:59 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            X-Request-Id:
                - 799bc176-182d-4057-8e15-93f0e1f0608b
        status: 200 OK
        code: 200
        duration: 59.036738ms
    - id: 9
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/72f0adf7-c0a6-4464-a2f7-8d5010e89f90
        method: DELETE
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 0
        body: ""
        headers:
            Content-Type:
                - application/json
            Date:
                - Thu, 11 Dec 2025 10:05:00 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            X-Request-Id:
                - ec0a4417-a6fe-43e1-9fc6-4f352dfb8a9e
        status: 204 No Content
        code: 204
        duration: 125.984969ms
    - id: 10
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/72f0adf7-c0a6-4464-a2f7-8d5010e89f90
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 564
        body: '{"id":"72f0adf7-c0a6-4464-a2f7-8d5010e89f90","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-rotation-action","usage":{"symmetric_encryption":"aes_256_gcm"},"state":"scheduled_for_deletion","rotation_count":2,"created_at":"2025-12-11T10:04:58.330991Z","updated_at":"2025-12-11T10:04:58.567736Z","protected":false,"locked":false,"description":"Test key","tags":["tf","test"],"rotated_at":"2025-12-11T10:04:58.567736Z","rotation_policy":null,"origin":"scaleway_kms","deletion_requested_at":"2025-12-11T10:05:00.094494Z","region":"fr-par"}'
        headers:
            Content-Length:
                - "564"
            Content-Type:
                - application/json
            Date:
                - Thu, 11 Dec 2025 10:05:00 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            X-Request-Id:
                - 9c885e41-ea56-4923-bb2a-1afb535ea35e
        status: 200 OK
        code: 200
        duration: 35.045934ms
    - id: 11
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/72f0adf7-c0a6-4464-a2f7-8d5010e89f90
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 564
        body: '{"id":"72f0adf7-c0a6-4464-a2f7-8d5010e89f90","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-rotation-action","usage":{"symmetric_encryption":"aes_256_gcm"},"state":"scheduled_for_deletion","rotation_count":2,"created_at":"2025-12-11T10:04:58.330991Z","updated_at":"2025-12-11T10:04:58.567736Z","protected":false,"locked":false,"description":"Test key","tags":["tf","test"],"rotated_at":"2025-12-11T10:04:58.567736Z","rotation_policy":null,"origin":"scaleway_kms","deletion_requested_at":"2025-12-11T10:05:00.094494Z","region":"fr-par"}'
        headers:
            Content-Length:
                - "564"
            Content-Type:
                - application/json
            Date:
                - Thu, 11 Dec 2025 10:05:00 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            X-Request-Id:
                - 10ab6c1e-8781-4c77-98cd-4b1e59e12819
        status: 200 OK
        code: 200
        duration: 46.074549ms
