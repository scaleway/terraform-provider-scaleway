---
version: 2
interactions:
- id: 0
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 230
    host: api.scaleway.com
    body: "{\"project_id\":\"105bdce1-64c0-48ab-899d-868455867ecf\",\"name\":\"tf-test-kms-key-unprotected-a\",\"usage\":{\"symmetric_encryption\":\"aes_256_gcm\"},\"description\":\"Test key\",\"tags\":[\"tf\",\"test\"],\"unprotected\":true,\"origin\":\"unknown_origin\"}"
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
    url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys
    method: POST
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: 522
    body: "{\"id\":\"907b06aa-ff1a-4aab-bf88-e7d44cf4503c\",\"project_id\":\"105bdce1-64c0-48ab-899d-868455867ecf\",\"name\":\"tf-test-kms-key-unprotected-a\",\"usage\":{\"symmetric_encryption\":\"aes_256_gcm\"},\"state\":\"enabled\",\"rotation_count\":1,\"created_at\":\"2025-12-10T15:22:19.786066Z\",\"updated_at\":\"2025-12-10T15:22:19.790072Z\",\"protected\":false,\"locked\":false,\"description\":\"Test key\",\"tags\":[\"tf\",\"test\"],\"rotated_at\":\"2025-12-10T15:22:19.790072Z\",\"rotation_policy\":null,\"origin\":\"scaleway_kms\",\"deletion_requested_at\":null,\"region\":\"fr-par\"}"
    headers:
      Content-Length:
      - "522"
      Content-Type:
      - application/json
      Date:
      - Wed, 10 Dec 2025 15:22:19 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      X-Request-Id:
      - 3aa55031-b1e0-48e7-984d-4663b7a07d32
    status: 200 OK
    code: 200
    duration: 398.795423ms
- id: 1
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: api.scaleway.com
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
    url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/907b06aa-ff1a-4aab-bf88-e7d44cf4503c
    method: GET
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: 522
    body: "{\"id\":\"907b06aa-ff1a-4aab-bf88-e7d44cf4503c\",\"project_id\":\"105bdce1-64c0-48ab-899d-868455867ecf\",\"name\":\"tf-test-kms-key-unprotected-a\",\"usage\":{\"symmetric_encryption\":\"aes_256_gcm\"},\"state\":\"enabled\",\"rotation_count\":1,\"created_at\":\"2025-12-10T15:22:19.786066Z\",\"updated_at\":\"2025-12-10T15:22:19.790072Z\",\"protected\":false,\"locked\":false,\"description\":\"Test key\",\"tags\":[\"tf\",\"test\"],\"rotated_at\":\"2025-12-10T15:22:19.790072Z\",\"rotation_policy\":null,\"origin\":\"scaleway_kms\",\"deletion_requested_at\":null,\"region\":\"fr-par\"}"
    headers:
      Content-Length:
      - "522"
      Content-Type:
      - application/json
      Date:
      - Wed, 10 Dec 2025 15:22:19 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      X-Request-Id:
      - 0a3f97ef-3c27-490f-8c75-4e3e028e0149
    status: 200 OK
    code: 200
    duration: 46.446705ms
- id: 2
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: api.scaleway.com
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
    url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/907b06aa-ff1a-4aab-bf88-e7d44cf4503c
    method: GET
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: 522
    body: "{\"id\":\"907b06aa-ff1a-4aab-bf88-e7d44cf4503c\",\"project_id\":\"105bdce1-64c0-48ab-899d-868455867ecf\",\"name\":\"tf-test-kms-key-unprotected-a\",\"usage\":{\"symmetric_encryption\":\"aes_256_gcm\"},\"state\":\"enabled\",\"rotation_count\":1,\"created_at\":\"2025-12-10T15:22:19.786066Z\",\"updated_at\":\"2025-12-10T15:22:19.790072Z\",\"protected\":false,\"locked\":false,\"description\":\"Test key\",\"tags\":[\"tf\",\"test\"],\"rotated_at\":\"2025-12-10T15:22:19.790072Z\",\"rotation_policy\":null,\"origin\":\"scaleway_kms\",\"deletion_requested_at\":null,\"region\":\"fr-par\"}"
    headers:
      Content-Length:
      - "522"
      Content-Type:
      - application/json
      Date:
      - Wed, 10 Dec 2025 15:22:19 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      X-Request-Id:
      - 6abf3a36-8b19-4f86-94e8-2e8685661f3e
    status: 200 OK
    code: 200
    duration: 86.189259ms
- id: 3
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: api.scaleway.com
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
    url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/907b06aa-ff1a-4aab-bf88-e7d44cf4503c
    method: GET
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: 522
    body: "{\"id\":\"907b06aa-ff1a-4aab-bf88-e7d44cf4503c\",\"project_id\":\"105bdce1-64c0-48ab-899d-868455867ecf\",\"name\":\"tf-test-kms-key-unprotected-a\",\"usage\":{\"symmetric_encryption\":\"aes_256_gcm\"},\"state\":\"enabled\",\"rotation_count\":1,\"created_at\":\"2025-12-10T15:22:19.786066Z\",\"updated_at\":\"2025-12-10T15:22:19.790072Z\",\"protected\":false,\"locked\":false,\"description\":\"Test key\",\"tags\":[\"tf\",\"test\"],\"rotated_at\":\"2025-12-10T15:22:19.790072Z\",\"rotation_policy\":null,\"origin\":\"scaleway_kms\",\"deletion_requested_at\":null,\"region\":\"fr-par\"}"
    headers:
      Content-Length:
      - "522"
      Content-Type:
      - application/json
      Date:
      - Wed, 10 Dec 2025 15:22:20 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      X-Request-Id:
      - e8bf025d-ba13-483c-b834-7038fcca1313
    status: 200 OK
    code: 200
    duration: 83.37555ms
- id: 4
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: api.scaleway.com
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
    url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/907b06aa-ff1a-4aab-bf88-e7d44cf4503c
    method: GET
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: 522
    body: "{\"id\":\"907b06aa-ff1a-4aab-bf88-e7d44cf4503c\",\"project_id\":\"105bdce1-64c0-48ab-899d-868455867ecf\",\"name\":\"tf-test-kms-key-unprotected-a\",\"usage\":{\"symmetric_encryption\":\"aes_256_gcm\"},\"state\":\"enabled\",\"rotation_count\":1,\"created_at\":\"2025-12-10T15:22:19.786066Z\",\"updated_at\":\"2025-12-10T15:22:19.790072Z\",\"protected\":false,\"locked\":false,\"description\":\"Test key\",\"tags\":[\"tf\",\"test\"],\"rotated_at\":\"2025-12-10T15:22:19.790072Z\",\"rotation_policy\":null,\"origin\":\"scaleway_kms\",\"deletion_requested_at\":null,\"region\":\"fr-par\"}"
    headers:
      Content-Length:
      - "522"
      Content-Type:
      - application/json
      Date:
      - Wed, 10 Dec 2025 15:22:20 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      X-Request-Id:
      - 3472da1c-3d75-4766-a2ec-aab284272db4
    status: 200 OK
    code: 200
    duration: 51.427992ms
- id: 5
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: api.scaleway.com
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
    url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/907b06aa-ff1a-4aab-bf88-e7d44cf4503c
    method: GET
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: 522
    body: "{\"id\":\"907b06aa-ff1a-4aab-bf88-e7d44cf4503c\",\"project_id\":\"105bdce1-64c0-48ab-899d-868455867ecf\",\"name\":\"tf-test-kms-key-unprotected-a\",\"usage\":{\"symmetric_encryption\":\"aes_256_gcm\"},\"state\":\"enabled\",\"rotation_count\":1,\"created_at\":\"2025-12-10T15:22:19.786066Z\",\"updated_at\":\"2025-12-10T15:22:19.790072Z\",\"protected\":false,\"locked\":false,\"description\":\"Test key\",\"tags\":[\"tf\",\"test\"],\"rotated_at\":\"2025-12-10T15:22:19.790072Z\",\"rotation_policy\":null,\"origin\":\"scaleway_kms\",\"deletion_requested_at\":null,\"region\":\"fr-par\"}"
    headers:
      Content-Length:
      - "522"
      Content-Type:
      - application/json
      Date:
      - Wed, 10 Dec 2025 15:22:20 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      X-Request-Id:
      - 1c5237d2-5b66-426f-970f-439e65799c14
    status: 200 OK
    code: 200
    duration: 32.289815ms
- id: 6
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: api.scaleway.com
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
    url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/907b06aa-ff1a-4aab-bf88-e7d44cf4503c
    method: DELETE
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: 0
    body: ""
    headers:
      Content-Type:
      - application/json
      Date:
      - Wed, 10 Dec 2025 15:22:20 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      X-Request-Id:
      - 7757c59f-2e5a-49c8-9c03-c34042092398
    status: 204 No Content
    code: 204
    duration: 167.000157ms
- id: 7
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: api.scaleway.com
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
    url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/907b06aa-ff1a-4aab-bf88-e7d44cf4503c
    method: GET
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: 562
    body: "{\"id\":\"907b06aa-ff1a-4aab-bf88-e7d44cf4503c\",\"project_id\":\"105bdce1-64c0-48ab-899d-868455867ecf\",\"name\":\"tf-test-kms-key-unprotected-a\",\"usage\":{\"symmetric_encryption\":\"aes_256_gcm\"},\"state\":\"scheduled_for_deletion\",\"rotation_count\":1,\"created_at\":\"2025-12-10T15:22:19.786066Z\",\"updated_at\":\"2025-12-10T15:22:19.790072Z\",\"protected\":false,\"locked\":false,\"description\":\"Test key\",\"tags\":[\"tf\",\"test\"],\"rotated_at\":\"2025-12-10T15:22:19.790072Z\",\"rotation_policy\":null,\"origin\":\"scaleway_kms\",\"deletion_requested_at\":\"2025-12-10T15:22:20.756495Z\",\"region\":\"fr-par\"}"
    headers:
      Content-Length:
      - "562"
      Content-Type:
      - application/json
      Date:
      - Wed, 10 Dec 2025 15:22:20 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      X-Request-Id:
      - 34d9e1b4-025d-496d-909c-fedc6671ea1e
    status: 200 OK
    code: 200
    duration: 32.460113ms
- id: 8
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: api.scaleway.com
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
    url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/907b06aa-ff1a-4aab-bf88-e7d44cf4503c
    method: GET
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: 562
    body: "{\"id\":\"907b06aa-ff1a-4aab-bf88-e7d44cf4503c\",\"project_id\":\"105bdce1-64c0-48ab-899d-868455867ecf\",\"name\":\"tf-test-kms-key-unprotected-a\",\"usage\":{\"symmetric_encryption\":\"aes_256_gcm\"},\"state\":\"scheduled_for_deletion\",\"rotation_count\":1,\"created_at\":\"2025-12-10T15:22:19.786066Z\",\"updated_at\":\"2025-12-10T15:22:19.790072Z\",\"protected\":false,\"locked\":false,\"description\":\"Test key\",\"tags\":[\"tf\",\"test\"],\"rotated_at\":\"2025-12-10T15:22:19.790072Z\",\"rotation_policy\":null,\"origin\":\"scaleway_kms\",\"deletion_requested_at\":\"2025-12-10T15:22:20.756495Z\",\"region\":\"fr-par\"}"
    headers:
      Content-Length:
      - "562"
      Content-Type:
      - application/json
      Date:
      - Wed, 10 Dec 2025 15:22:20 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      X-Request-Id:
      - 2294c6fa-457d-4b93-b4ac-6d7d70c8ab6d
    status: 200 OK
    code: 200
    duration: 81.415245ms
