---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 223
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: '{"project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-update","usage":{"symmetric_encryption":"aes_256_gcm"},"description":"Test key","tags":["tf","test"],"unprotected":true,"origin":"unknown_origin"}'
        form: {}
        headers:
            Content-Type:
                - application/json
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.0; darwin; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 532
        uncompressed: false
        body: '{"created_at":"2025-10-14T09:00:16.801345Z","deletion_requested_at":null,"description":"Test key","id":"c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca","locked":false,"name":"tf-test-kms-key-update","origin":"scaleway_kms","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","protected":false,"region":"fr-par","rotated_at":"2025-10-14T09:00:16.815782Z","rotation_count":1,"rotation_policy":null,"state":"enabled","tags":["tf","test"],"updated_at":"2025-10-14T09:00:16.815782Z","usage":{"symmetric_encryption":"aes_256_gcm"}}'
        headers:
            Content-Length:
                - "532"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Tue, 14 Oct 2025 09:00:16 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge01)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - 6d722224-8252-42bf-b8a8-92bed5572159
        status: 200 OK
        code: 200
        duration: 1.847214375s
    - id: 1
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.0; darwin; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 532
        uncompressed: false
        body: '{"created_at":"2025-10-14T09:00:16.801345Z","deletion_requested_at":null,"description":"Test key","id":"c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca","locked":false,"name":"tf-test-kms-key-update","origin":"scaleway_kms","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","protected":false,"region":"fr-par","rotated_at":"2025-10-14T09:00:16.815782Z","rotation_count":1,"rotation_policy":null,"state":"enabled","tags":["tf","test"],"updated_at":"2025-10-14T09:00:16.815782Z","usage":{"symmetric_encryption":"aes_256_gcm"}}'
        headers:
            Content-Length:
                - "532"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Tue, 14 Oct 2025 09:00:17 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge01)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - ace107ec-96a8-48fb-82c9-d9b70e8790b8
        status: 200 OK
        code: 200
        duration: 147.08075ms
    - id: 2
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.0; darwin; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 532
        uncompressed: false
        body: '{"created_at":"2025-10-14T09:00:16.801345Z","deletion_requested_at":null,"description":"Test key","id":"c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca","locked":false,"name":"tf-test-kms-key-update","origin":"scaleway_kms","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","protected":false,"region":"fr-par","rotated_at":"2025-10-14T09:00:16.815782Z","rotation_count":1,"rotation_policy":null,"state":"enabled","tags":["tf","test"],"updated_at":"2025-10-14T09:00:16.815782Z","usage":{"symmetric_encryption":"aes_256_gcm"}}'
        headers:
            Content-Length:
                - "532"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Tue, 14 Oct 2025 09:00:18 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge01)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - ee2fdd44-8253-47c3-91a9-bf3150372842
        status: 200 OK
        code: 200
        duration: 81.54125ms
    - id: 3
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.0; darwin; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 532
        uncompressed: false
        body: '{"created_at":"2025-10-14T09:00:16.801345Z","deletion_requested_at":null,"description":"Test key","id":"c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca","locked":false,"name":"tf-test-kms-key-update","origin":"scaleway_kms","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","protected":false,"region":"fr-par","rotated_at":"2025-10-14T09:00:16.815782Z","rotation_count":1,"rotation_policy":null,"state":"enabled","tags":["tf","test"],"updated_at":"2025-10-14T09:00:16.815782Z","usage":{"symmetric_encryption":"aes_256_gcm"}}'
        headers:
            Content-Length:
                - "532"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Tue, 14 Oct 2025 09:00:18 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge01)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - 0111ec7d-25f5-443b-a3d2-8a7d8123c01d
        status: 200 OK
        code: 200
        duration: 24.22575ms
    - id: 4
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 91
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: '{"name":"tf-test-kms-key-updated","description":"Test key updated","tags":["tf","updated"]}'
        form: {}
        headers:
            Content-Type:
                - application/json
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.0; darwin; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca
        method: PATCH
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 544
        uncompressed: false
        body: '{"created_at":"2025-10-14T09:00:16.801345Z","deletion_requested_at":null,"description":"Test key updated","id":"c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca","locked":false,"name":"tf-test-kms-key-updated","origin":"scaleway_kms","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","protected":false,"region":"fr-par","rotated_at":"2025-10-14T09:00:16.815782Z","rotation_count":1,"rotation_policy":null,"state":"enabled","tags":["tf","updated"],"updated_at":"2025-10-14T09:00:19.245124Z","usage":{"symmetric_encryption":"aes_256_gcm"}}'
        headers:
            Content-Length:
                - "544"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Tue, 14 Oct 2025 09:00:19 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge01)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - b9a485ba-d225-4629-bbc2-f52ce34c7448
        status: 200 OK
        code: 200
        duration: 120.332459ms
    - id: 5
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.0; darwin; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 544
        uncompressed: false
        body: '{"created_at":"2025-10-14T09:00:16.801345Z","deletion_requested_at":null,"description":"Test key updated","id":"c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca","locked":false,"name":"tf-test-kms-key-updated","origin":"scaleway_kms","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","protected":false,"region":"fr-par","rotated_at":"2025-10-14T09:00:16.815782Z","rotation_count":1,"rotation_policy":null,"state":"enabled","tags":["tf","updated"],"updated_at":"2025-10-14T09:00:19.245124Z","usage":{"symmetric_encryption":"aes_256_gcm"}}'
        headers:
            Content-Length:
                - "544"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Tue, 14 Oct 2025 09:00:19 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge01)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - f52734fa-7a77-43a8-a586-d7ce7c092616
        status: 200 OK
        code: 200
        duration: 75.776417ms
    - id: 6
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.0; darwin; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 544
        uncompressed: false
        body: '{"created_at":"2025-10-14T09:00:16.801345Z","deletion_requested_at":null,"description":"Test key updated","id":"c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca","locked":false,"name":"tf-test-kms-key-updated","origin":"scaleway_kms","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","protected":false,"region":"fr-par","rotated_at":"2025-10-14T09:00:16.815782Z","rotation_count":1,"rotation_policy":null,"state":"enabled","tags":["tf","updated"],"updated_at":"2025-10-14T09:00:19.245124Z","usage":{"symmetric_encryption":"aes_256_gcm"}}'
        headers:
            Content-Length:
                - "544"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Tue, 14 Oct 2025 09:00:20 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge01)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - e9e7af64-43c6-4f86-bf50-be8dea985edd
        status: 200 OK
        code: 200
        duration: 22.158541ms
    - id: 7
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.0; darwin; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca
        method: DELETE
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 0
        uncompressed: false
        body: ""
        headers:
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Tue, 14 Oct 2025 09:00:20 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge01)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - 62f35bc9-1847-4fb9-82e7-6e4e33583a0d
        status: 204 No Content
        code: 204
        duration: 146.758542ms
    - id: 8
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.0; darwin; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 584
        uncompressed: false
        body: '{"created_at":"2025-10-14T09:00:16.801345Z","deletion_requested_at":"2025-10-14T09:00:20.975343Z","description":"Test key updated","id":"c4357bcd-5ca5-4d0c-8736-b5df0e9fb0ca","locked":false,"name":"tf-test-kms-key-updated","origin":"scaleway_kms","project_id":"105bdce1-64c0-48ab-899d-868455867ecf","protected":false,"region":"fr-par","rotated_at":"2025-10-14T09:00:16.815782Z","rotation_count":1,"rotation_policy":null,"state":"scheduled_for_deletion","tags":["tf","updated"],"updated_at":"2025-10-14T09:00:19.245124Z","usage":{"symmetric_encryption":"aes_256_gcm"}}'
        headers:
            Content-Length:
                - "584"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Tue, 14 Oct 2025 09:00:21 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge01)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - a456e7fd-8c67-43b6-87b3-3e4657368c67
        status: 200 OK
        code: 200
        duration: 106.084875ms
