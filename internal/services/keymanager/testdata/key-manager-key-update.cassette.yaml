---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 223
        host: api.scaleway.com
        body: '{"project_id":"105bdce1-64c0-48ab-899d-868455867ecf","name":"tf-test-kms-key-update","usage":{"symmetric_encryption":"aes_256_gcm"},"description":"Test key","tags":["tf","test"],"unprotected":true,"origin":"unknown_origin"}'
        headers:
            Content-Type:
                - application/json
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 532
        body: '{"id":"dc3bfcdb-53ea-4319-99f2-59fe6c635c8c", "project_id":"105bdce1-64c0-48ab-899d-868455867ecf", "name":"tf-test-kms-key-update", "usage":{"symmetric_encryption":"aes_256_gcm"}, "state":"enabled", "rotation_count":1, "created_at":"2026-01-07T10:29:50.381426Z", "updated_at":"2026-01-07T10:29:50.386485Z", "protected":false, "locked":false, "description":"Test key", "tags":["tf", "test"], "rotated_at":"2026-01-07T10:29:50.386485Z", "rotation_policy":null, "origin":"scaleway_kms", "deletion_requested_at":null, "region":"fr-par"}'
        headers:
            Content-Length:
                - "532"
            Content-Type:
                - application/json
            Date:
                - Wed, 07 Jan 2026 10:29:50 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge02)
            X-Request-Id:
                - 5e90e931-8d51-4fbb-86cf-02b82f84f32e
        status: 200 OK
        code: 200
        duration: 1.6039317s
    - id: 1
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/dc3bfcdb-53ea-4319-99f2-59fe6c635c8c
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 532
        body: '{"id":"dc3bfcdb-53ea-4319-99f2-59fe6c635c8c", "project_id":"105bdce1-64c0-48ab-899d-868455867ecf", "name":"tf-test-kms-key-update", "usage":{"symmetric_encryption":"aes_256_gcm"}, "state":"enabled", "rotation_count":1, "created_at":"2026-01-07T10:29:50.381426Z", "updated_at":"2026-01-07T10:29:50.386485Z", "protected":false, "locked":false, "description":"Test key", "tags":["tf", "test"], "rotated_at":"2026-01-07T10:29:50.386485Z", "rotation_policy":null, "origin":"scaleway_kms", "deletion_requested_at":null, "region":"fr-par"}'
        headers:
            Content-Length:
                - "532"
            Content-Type:
                - application/json
            Date:
                - Wed, 07 Jan 2026 10:29:50 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge02)
            X-Request-Id:
                - cba2467b-b0ad-4c92-a0df-a790831691a5
        status: 200 OK
        code: 200
        duration: 71.849087ms
    - id: 2
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/dc3bfcdb-53ea-4319-99f2-59fe6c635c8c
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 532
        body: '{"id":"dc3bfcdb-53ea-4319-99f2-59fe6c635c8c", "project_id":"105bdce1-64c0-48ab-899d-868455867ecf", "name":"tf-test-kms-key-update", "usage":{"symmetric_encryption":"aes_256_gcm"}, "state":"enabled", "rotation_count":1, "created_at":"2026-01-07T10:29:50.381426Z", "updated_at":"2026-01-07T10:29:50.386485Z", "protected":false, "locked":false, "description":"Test key", "tags":["tf", "test"], "rotated_at":"2026-01-07T10:29:50.386485Z", "rotation_policy":null, "origin":"scaleway_kms", "deletion_requested_at":null, "region":"fr-par"}'
        headers:
            Content-Length:
                - "532"
            Content-Type:
                - application/json
            Date:
                - Wed, 07 Jan 2026 10:29:51 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge02)
            X-Request-Id:
                - a39688a6-6db0-4b24-aa0a-e0c4c9cb217a
        status: 200 OK
        code: 200
        duration: 63.471165ms
    - id: 3
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/dc3bfcdb-53ea-4319-99f2-59fe6c635c8c
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 532
        body: '{"id":"dc3bfcdb-53ea-4319-99f2-59fe6c635c8c", "project_id":"105bdce1-64c0-48ab-899d-868455867ecf", "name":"tf-test-kms-key-update", "usage":{"symmetric_encryption":"aes_256_gcm"}, "state":"enabled", "rotation_count":1, "created_at":"2026-01-07T10:29:50.381426Z", "updated_at":"2026-01-07T10:29:50.386485Z", "protected":false, "locked":false, "description":"Test key", "tags":["tf", "test"], "rotated_at":"2026-01-07T10:29:50.386485Z", "rotation_policy":null, "origin":"scaleway_kms", "deletion_requested_at":null, "region":"fr-par"}'
        headers:
            Content-Length:
                - "532"
            Content-Type:
                - application/json
            Date:
                - Wed, 07 Jan 2026 10:29:51 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge02)
            X-Request-Id:
                - 2e64196b-0b06-4253-a532-d22b10726750
        status: 200 OK
        code: 200
        duration: 77.321016ms
    - id: 4
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 91
        host: api.scaleway.com
        body: '{"name":"tf-test-kms-key-updated","description":"Test key updated","tags":["tf","updated"]}'
        headers:
            Content-Type:
                - application/json
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/dc3bfcdb-53ea-4319-99f2-59fe6c635c8c
        method: PATCH
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 544
        body: '{"id":"dc3bfcdb-53ea-4319-99f2-59fe6c635c8c", "project_id":"105bdce1-64c0-48ab-899d-868455867ecf", "name":"tf-test-kms-key-updated", "usage":{"symmetric_encryption":"aes_256_gcm"}, "state":"enabled", "rotation_count":1, "created_at":"2026-01-07T10:29:50.381426Z", "updated_at":"2026-01-07T10:29:51.968100Z", "protected":false, "locked":false, "description":"Test key updated", "tags":["tf", "updated"], "rotated_at":"2026-01-07T10:29:50.386485Z", "rotation_policy":null, "origin":"scaleway_kms", "deletion_requested_at":null, "region":"fr-par"}'
        headers:
            Content-Length:
                - "544"
            Content-Type:
                - application/json
            Date:
                - Wed, 07 Jan 2026 10:29:52 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge02)
            X-Request-Id:
                - 3e7b6c10-ec92-4b9a-b3af-f6e473cf347a
        status: 200 OK
        code: 200
        duration: 519.540035ms
    - id: 5
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/dc3bfcdb-53ea-4319-99f2-59fe6c635c8c
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 544
        body: '{"id":"dc3bfcdb-53ea-4319-99f2-59fe6c635c8c", "project_id":"105bdce1-64c0-48ab-899d-868455867ecf", "name":"tf-test-kms-key-updated", "usage":{"symmetric_encryption":"aes_256_gcm"}, "state":"enabled", "rotation_count":1, "created_at":"2026-01-07T10:29:50.381426Z", "updated_at":"2026-01-07T10:29:51.968100Z", "protected":false, "locked":false, "description":"Test key updated", "tags":["tf", "updated"], "rotated_at":"2026-01-07T10:29:50.386485Z", "rotation_policy":null, "origin":"scaleway_kms", "deletion_requested_at":null, "region":"fr-par"}'
        headers:
            Content-Length:
                - "544"
            Content-Type:
                - application/json
            Date:
                - Wed, 07 Jan 2026 10:29:52 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge02)
            X-Request-Id:
                - 95e656eb-e666-42ae-9acd-cd10d56398b9
        status: 200 OK
        code: 200
        duration: 59.178363ms
    - id: 6
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/dc3bfcdb-53ea-4319-99f2-59fe6c635c8c
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 544
        body: '{"id":"dc3bfcdb-53ea-4319-99f2-59fe6c635c8c", "project_id":"105bdce1-64c0-48ab-899d-868455867ecf", "name":"tf-test-kms-key-updated", "usage":{"symmetric_encryption":"aes_256_gcm"}, "state":"enabled", "rotation_count":1, "created_at":"2026-01-07T10:29:50.381426Z", "updated_at":"2026-01-07T10:29:51.968100Z", "protected":false, "locked":false, "description":"Test key updated", "tags":["tf", "updated"], "rotated_at":"2026-01-07T10:29:50.386485Z", "rotation_policy":null, "origin":"scaleway_kms", "deletion_requested_at":null, "region":"fr-par"}'
        headers:
            Content-Length:
                - "544"
            Content-Type:
                - application/json
            Date:
                - Wed, 07 Jan 2026 10:29:52 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge02)
            X-Request-Id:
                - aab915e8-a592-4008-9a5a-3cdccbd81d55
        status: 200 OK
        code: 200
        duration: 110.374053ms
    - id: 7
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/dc3bfcdb-53ea-4319-99f2-59fe6c635c8c
        method: DELETE
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 0
        body: ""
        headers:
            Content-Type:
                - application/json
            Date:
                - Wed, 07 Jan 2026 10:29:53 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge02)
            X-Request-Id:
                - 66f64e2a-41b2-4321-bc0c-b4271227e3e7
        status: 204 No Content
        code: 204
        duration: 109.642473ms
    - id: 8
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.scaleway.com
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.25.5; linux; amd64) terraform-provider/develop terraform/terraform-tests
        url: https://api.scaleway.com/key-manager/v1alpha1/regions/fr-par/keys/dc3bfcdb-53ea-4319-99f2-59fe6c635c8c
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: 584
        body: '{"id":"dc3bfcdb-53ea-4319-99f2-59fe6c635c8c", "project_id":"105bdce1-64c0-48ab-899d-868455867ecf", "name":"tf-test-kms-key-updated", "usage":{"symmetric_encryption":"aes_256_gcm"}, "state":"scheduled_for_deletion", "rotation_count":1, "created_at":"2026-01-07T10:29:50.381426Z", "updated_at":"2026-01-07T10:29:51.968100Z", "protected":false, "locked":false, "description":"Test key updated", "tags":["tf", "updated"], "rotated_at":"2026-01-07T10:29:50.386485Z", "rotation_policy":null, "origin":"scaleway_kms", "deletion_requested_at":"2026-01-07T10:29:53.303434Z", "region":"fr-par"}'
        headers:
            Content-Length:
                - "584"
            Content-Type:
                - application/json
            Date:
                - Wed, 07 Jan 2026 10:29:53 GMT
            Server:
                - Scaleway API Gateway (fr-par-2;edge02)
            X-Request-Id:
                - 5b3aaa9c-5f9a-47a2-bf9a-8765dae24f86
        status: 200 OK
        code: 200
        duration: 49.570423ms
